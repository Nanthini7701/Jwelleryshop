{% extends "shop/base.html" %}
{% load static %}
{% block content %}

<!-- ====== White preloader overlay (shows until page fully loaded) ====== -->
<style>
  /* Scoped CSS for About page */
  .page-preloader {
    position: fixed;
    inset: 0;
    background: #ffffff; /* white overlay while loading */
    z-index: 10800;
    display:flex;
    align-items:center;
    justify-content:center;
    flex-direction:column;
    gap:18px;
    transition: opacity .6s ease, visibility .6s ease;
  }
  .page-preloader.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
  .preloader-logo { font-weight:800; font-size:1.25rem; color:#0b1220; letter-spacing:0.6px; }
  .preloader-spinner {
    width:62px; height:62px; border-radius:50%;
    border:6px solid rgba(11,18,32,0.08);
    border-top-color: #ffd27a; /* gold accent */
    animation: spin 1.1s linear infinite;
    box-shadow: 0 10px 30px rgba(2,6,23,0.06);
  }
  @keyframes spin { to { transform: rotate(360deg); } }

  /* Page hero for about */
  .about-hero {
    display:grid;
    grid-template-columns: 1fr 420px;
    gap:28px;
    align-items:center;
    margin-bottom:34px;
  }
  @media(max-width:991px) {
    .about-hero { grid-template-columns: 1fr; padding: 0 12px; }
  }

  .about-hero .hero-media {
    border-radius:14px;
    overflow:hidden;
    box-shadow: 0 20px 60px rgba(2,6,23,0.08);
  }
  .about-hero img { width:100%; height:100%; object-fit:cover; display:block; }

  .about-card {
    background: linear-gradient(180deg, #ffffff, #fcfcfd);
    padding:28px;
    border-radius:12px;
    box-shadow: 0 14px 40px rgba(2,6,23,0.06);
  }

  /* sections */
  .about-section { margin-bottom:28px; }
  .about-mission { display:flex; gap:20px; align-items:flex-start; flex-wrap:wrap; }
  .stat {
    min-width:130px;
    background: linear-gradient(180deg,#fff,#fff);
    padding:18px;
    border-radius:10px;
    text-align:center;
    box-shadow: 0 10px 30px rgba(2,6,23,0.04);
  }
  .stat .num { font-size:1.6rem; font-weight:700; color:#b36b00; }
  .stat small { color:#6b7280; display:block; margin-top:6px; }

  /* team grid */
  .team-grid { display:grid; grid-template-columns: repeat(3,1fr); gap:18px; }
  @media(max-width:991px) { .team-grid { grid-template-columns: repeat(1,1fr); } }
  .team-card {
    background:#fff; padding:16px; border-radius:12px;
    display:flex; gap:12px; align-items:center; box-shadow: 0 10px 30px rgba(2,6,23,0.06);
  }
  .team-card img { width:64px; height:64px; object-fit:cover; border-radius:10px; }

  /* reveal animation helper */
  .reveal-sm { opacity:0; transform: translateY(14px); transition: all .6s cubic-bezier(.2,.9,.3,1); }
  .reveal-sm.visible { opacity:1; transform:none; }

  /* CTA */
  .about-cta { margin-top:16px; display:flex; gap:12px; align-items:center; }
</style>

<div id="pagePreloader" class="page-preloader" aria-hidden="false">
  <div class="preloader-logo">Jwellery</div>
  <div class="preloader-spinner" role="img" aria-label="Loading"></div>
  <div class="small text-muted">Crafting timeless pieces — preparing your experience</div>
</div>

<!-- About hero -->
<section class="about-hero container">
  <div class="about-card reveal-sm" id="aboutIntro">
    <h2 class="mb-2">About Jwellery</h2>
    <p class="lead text-muted">Handcrafted jewellery with timeless designs. We create pieces with care and attention to detail — responsibly sourced metals and artisan finishes.</p>

    <div class="about-section">
      <h5 class="mb-2">Our Story</h5>
      <p>We started as a small atelier focused on handcrafted pieces that blend tradition and modern design. Each piece is inspected and finished by hand to ensure lasting beauty.</p>
    </div>

    <div class="about-mission">
      <div style="flex:1; min-width:260px;">
        <h6>Mission</h6>
        <p class="small text-muted mb-0">Create meaningful jewellery that lasts. We emphasize sustainability, careful sourcing, and handcrafted quality.</p>
        <div class="about-cta">
          <a href="{% url 'shop:product_list' %}" class="btn btn-primary">Shop Now</a>
          <a href="{% url 'shop:contact' %}" class="btn btn-outline-secondary">Contact Us</a>
        </div>
      </div>

      <div style="display:flex; gap:12px; align-items:center;">
        <div class="stat">
          <div class="num" data-target="1200">0</div>
          <small>Pieces sold</small>
        </div>
        <div class="stat">
          <div class="num" data-target="8">0</div>
          <small>Years crafting</small>
        </div>
        <div class="stat">
          <div class="num" data-target="98">0</div>
          <small>Customer rating %</small>
        </div>
      </div>
    </div>
  </div>

  <div class="hero-media reveal-sm" id="aboutMedia">
    <img src="{% static 'shop/images/j1.jpeg' %}" alt="Artisan crafting jewellery" class="rounded-3">
  </div>
</section>

<!-- Team -->
<section class="container about-section">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4 class="mb-0">Meet the Team</h4>
    <a href="{% url 'shop:product_list' %}" class="small text-muted">Shop our collection</a>
  </div>

  <div class="team-grid">
    <div class="team-card reveal-sm">
      <img src="{% static 'shop/images/team1.jpeg' %}" alt="Team member">
      <div>
        <div class="fw-bold">Ananya</div>
        <div class="small text-muted">Founder & Lead Designer</div>
      </div>
    </div>

    <div class="team-card reveal-sm">
      <img src="{% static 'shop/images/team2.jpeg' %}" alt="Team member">
      <div>
        <div class="fw-bold">Ravi</div>
        <div class="small text-muted">Master Craftsman</div>
      </div>
    </div>

    <div class="team-card reveal-sm">
      <img src="{% static 'shop/images/team3.jpeg' %}" alt="Team member">
      <div>
        <div class="fw-bold">Priya</div>
        <div class="small text-muted">Customer Experience</div>
      </div>
    </div>
  </div>
</section>

<!-- Contact small card -->
<section class="container about-section">
  <div class="about-card reveal-sm">
    <h5>Get in touch</h5>
    <p class="small text-muted mb-2">Questions about a product or a custom order? We're happy to help.</p>
    <div class="d-flex gap-3 flex-wrap">
      <a href="mailto:support@example.com" class="btn btn-outline-primary">Email Us</a>
      <a href="tel:+919876543210" class="btn btn-outline-secondary">Call +91 98765 43210</a>
    </div>
  </div>
</section>

<!-- reveal + preloader JS -->
<script>
  (function () {
    // PRELOADER: hide on window load, nice fade
    const pre = document.getElementById('pagePreloader');
    function hidePreloader() {
      pre.classList.add('hidden');
      setTimeout(() => pre.style.display = 'none', 700);
    }
    if (document.readyState === 'complete') {
      hidePreloader();
    } else {
      window.addEventListener('load', hidePreloader);
    }

    // reveal-on-scroll for elements with .reveal-sm
    const reveals = document.querySelectorAll('.reveal-sm');
    const io = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          io.unobserve(entry.target);
        }
      });
    }, { threshold: 0.12 });
    reveals.forEach(el => io.observe(el));

    // Count-up animation for .num elements
    function animateCount(el) {
      const target = parseInt(el.getAttribute('data-target') || '0', 10);
      const duration = 1200;
      let start = 0;
      const startTime = performance.now();
      function step(now) {
        const progress = Math.min((now - startTime) / duration, 1);
        const eased = progress < 0.5 ? 2*progress*progress : -1 + (4 - 2*progress)*progress; // easeInOutQuad-ish
        el.textContent = Math.floor(start + (target - start) * eased);
        if (progress < 1) requestAnimationFrame(step);
        else el.textContent = target;
      }
      requestAnimationFrame(step);
    }

    const nums = document.querySelectorAll('.num');
    // animate when visible
    const numIo = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          animateCount(entry.target);
          numIo.unobserve(entry.target);
        }
      });
    }, { threshold: 0.2 });
    nums.forEach(n => numIo.observe(n));
  })();
</script>

{% endblock %}
