{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jwellery Shop</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Your site CSS -->
  <link rel="stylesheet" href="{% static 'shop/css/styles.css' %}">

  <style>
    .nav-brand .img1{
      width: 50px;
      height: 50px;
      border-radius: 50%;
    }
  /* ===== hero container ===== */
    .hero-full {
      position: relative;
      overflow: hidden;
      border-radius: 0; /* full-bleed hero - if you want rounded, change this */
      min-height: 90vh; /* large immersive hero */
      display: flex;
      align-items: center;
      justify-content: center;
      color: #061122;
      margin-bottom: 2.5rem;
      background-position: center center;
      background-size: cover;
      background-repeat: no-repeat;
      will-change: transform;
    }

    /* soft dark overlay to ensure text contrast */
    .hero-full::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, rgba(6,17,34,0.18) 0%, rgba(6,17,34,0.42) 50%, rgba(6,17,34,0.6) 100%);
      z-index: 2;
      pointer-events: none;
    }
    /* Add to shop/static/shop/css/styles.css */

/* hero background (static CSS - avoids template parsing errors) */
.hero-bg {
  background-image: url('/static/shop/images/hroban.jpeg');
  background-position: center;
  background-size: cover;
  background-repeat: no-repeat;
}

    /* subtle slow zoom for depth */
    .hero-zoom {
      animation: heroZoom 20s ease-in-out infinite alternate;
    }
    @keyframes heroZoom {
      from { transform: scale(1); }
      to   { transform: scale(1.04); }
    }

    /* sheen sweep (large soft white passing) */
    .hero-sheen {
      position:absolute; inset:-10% -40%;
      background: linear-gradient(110deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.12) 40%, rgba(255,255,255,0) 60%);
      transform: translateX(-120%);
      filter: blur(28px);
      opacity: .95;
      z-index: 3;
      animation: sheen 14s linear infinite;
      pointer-events:none;
    }
    @keyframes sheen { 0%{transform:translateX(-120%)} 60%{transform:translateX(140%)} 100%{transform:translateX(140%)} }

    /* glitter particles container (particles generated by JS) */
    .hero-glitters { position:absolute; inset:0; z-index:4; pointer-events:none; overflow:hidden; }

    .glitter {
      position: absolute;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff, #ffeaa7 35%, #ffb703 60%);
      box-shadow: 0 6px 18px rgba(2,6,23,0.12);
      opacity: 0;
      transform: scale(.8);
      will-change: transform, opacity;
    }

    /* content card centered */
    .hero-card {
      position: relative;
      z-index: 6;
      max-width: 1100px;
      padding: 48px 28px;
      display: flex;
      gap: 28px;
      align-items: center;
      justify-content: space-between;
      width: 100%;
    }

    .hero-left {
      color: #fff;
      max-width: 62%;
    }

    .hero-left h1 {
      margin: 0 0 12px 0;
      font-size: clamp(1.8rem, 4.6vw, 3.6rem);
      line-height: 1.02;
      letter-spacing: -0.6px;
      font-weight: 800;
      text-shadow: 0 8px 32px rgba(2,6,23,0.35);
    }

    .hero-left p.lead {
      margin: 0 0 18px 0;
      font-size: 1.05rem;
      color: rgba(255,255,255,0.92);
      text-shadow: 0 6px 18px rgba(2,6,23,0.25);
    }

    .hero-ctas { display:flex; gap:12px; align-items:center; }

    .btn-hero {
      border-radius: 12px;
      padding: .75rem 1.2rem;
      font-weight: 600;
      box-shadow: 0 12px 36px rgba(2,6,23,0.22);
      transition: transform .16s ease, box-shadow .16s ease;
    }
    .btn-hero:hover { transform: translateY(-4px); box-shadow: 0 22px 60px rgba(2,6,23,0.32); }

    /* decorative right column preview */
    .hero-preview {
      width: 280px;
      background: rgba(255,255,255,0.96);
      border-radius: 12px;
      padding: 14px;
      box-shadow: 0 18px 60px rgba(2,6,23,0.12);
      display: flex;
     
      gap: 12px;
      align-items: right;
    }
    .hero-preview img { width:86px; height:86px; object-fit:cover; border-radius:10px; }

    /* reveal */
    .reveal {
      opacity: 0;
      transform: translateY(14px);
      transition: all .6s cubic-bezier(.2,.9,.3,1);
      transition-delay:.12s;
    }
    .reveal.visible {
      opacity: 1;
      transform: none;
    }

    /* feature cards */
    .feature-card {
      border-radius: 12px;
      transition: transform .18s ease, box-shadow .18s ease;
      overflow: hidden;
      background: linear-gradient(180deg,#fff,#fbfbfc);
    }
    .feature-card:hover { transform: translateY(-6px); box-shadow: 0 14px 40px rgba(15,23,36,0.06); }

    /* product thumb */
    .product-thumb { height:120px; object-fit:cover; border-radius:8px; display:block; }

    /* subtle page-level micro-interactions */
    a.btn, .nav-link { transition: color .15s ease, background .15s ease; }

    /* footer tweaks */
    footer { background:#081225; color:#e6eef7; padding:30px 0; }
    footer a { color:#f8f9fa; text-decoration:none; }

    /* responsive hero layout for large screens */
    @media(min-width: 992px) {
      .hero { min-height: 480px; }
      .hero__content { padding-left: 4.5rem; padding-right: 4.5rem; }
      .hero-preview { position:absolute; right:3.5rem; bottom:2.5rem; transform: translateY(30px) scale(.98); }
      .hero:hover .hero__bg { transform: scale(1.08); }
       .hero-card { flex-direction: column; align-items:flex-start; gap:20px; padding: 36px 18px; }
      .hero-preview { width:100%; min-width:unset; }
      .hero-left h1 { font-size: clamp(1.6rem, 6.5vw, 2.8rem); }
      .hero-full { min-height: 70vh; }
       .hj-preview { position:absolute; right:3.2rem; bottom:2.6rem; z-index:6; }
      .hero-jewels { min-height:520px; }
    }
  </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
  <div class="container">
    <a class="navbar-brand nav-brand" href="{% url 'shop:product_list' %}"> <img src="{% static 'shop/images/g1.jpeg' %}" class="img1" alt="Team member">Jwellery</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="mainNav">
      <ul class="navbar-nav ms-auto align-items-lg-center">
        <li class="nav-item"><a class="nav-link" href="{% url 'shop:product_list' %}">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'shop:about' %}">About</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'shop:contact' %}">Contact</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'shop:view_wishlist' %}">Wishlist</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'shop:view_cart' %}">Cart</a></li>

      {% if user.is_authenticated %}
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="userMenu" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              {{ user.username }}
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenu">
              <li><a class="dropdown-item" href="{% url 'shop:logout_then_login' %}">Logout</a></li>
            </ul>
          </li>
        {% else %}
          <!-- Login + Signup (when not authenticated) -->
          <li class="nav-item me-2">
            <a class="nav-link btn btn-outline-primary" href="#" data-bs-toggle="modal" data-bs-target="#loginModal">Login</a>
          </li>
          <li class="nav-item">
            <a class="nav-link btn btn-primary text-white" href="#" data-bs-toggle="modal" data-bs-target="#signupModal">Signup</a>
          </li>
        {% endif %}
      </ul>
    </div>
  </div>
</nav>
<!--Logout-->
<!-- Login modal -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content" style="border-radius:12px;overflow:hidden;">
      <div class="modal-header">
        <h5 class="modal-title" id="loginModalLabel">Login to Jwellery</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form method="post" action="{% url 'login' %}">
          {% csrf_token %}
          <div class="mb-3">
            <label for="id_username" class="form-label">Username or Email</label>
            <input id="id_username" name="username" class="form-control" required>
          </div>
          <div class="mb-3">
            <label for="id_password" class="form-label">Password</label>
            <input id="id_password" name="password" type="password" class="form-control" required>
          </div>
          <input type="hidden" name="next" value="{% url 'shop:product_list' %}">
          <button type="submit" class="btn btn-primary w-100">Login</button>
        </form>

        <div class="mt-3 d-flex justify-content-between small text-muted">
          <a href="{% url 'password_reset' %}">Forgot password?</a>
          <a href="#" data-bs-target="#signupModal" data-bs-toggle="modal" data-bs-dismiss="modal">Create account</a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Signup modal -->
<div class="modal fade" id="signupModal" tabindex="-1" aria-labelledby="signupModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content" style="border-radius:12px;overflow:hidden;">
      <div class="modal-header">
        <h5 class="modal-title" id="signupModalLabel">Create your account</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        {# If you have a signup view that expects certain fields, adjust names accordingly.
           This example posts to 'shop:signup' — change the url name if yours differs. #}
        <form method="post" action="{% url 'shop:signup' %}">
          {% csrf_token %}
          <div class="mb-2">
            <label for="signup_name" class="form-label">Full name</label>
            <input id="signup_name" name="full_name" class="form-control" placeholder="Your full name" required>
          </div>
          <div class="mb-2">
            <label for="signup_email" class="form-label">Email</label>
            <input id="signup_email" name="email" type="email" class="form-control" placeholder="you@example.com" required>
          </div>
          <div class="mb-2">
            <label for="signup_username" class="form-label">Username</label>
            <input id="signup_username" name="username" class="form-control" placeholder="username" required>
          </div>
          <div class="mb-2">
            <label for="signup_password1" class="form-label">Password</label>
            <input id="signup_password1" name="password1" type="password" class="form-control" required>
          </div>
          <div class="mb-3">
            <label for="signup_password2" class="form-label">Confirm password</label>
            <input id="signup_password2" name="password2" type="password" class="form-control" required>
          </div>

          <button type="submit" class="btn btn-primary w-100">Create account</button>
        </form>

        <div class="mt-3 text-center small text-muted">
          By signing up you agree to our <a href="{% url 'shop:terms' %}">Terms</a>.
        </div>
      </div>
    </div>
  </div>
</div>


<!--===Message====-->
{% if messages %}
  <div class="container mt-3">
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endfor %}
  </div>
{% endif %}

<!-- HERO (template) — paste this in place of your existing hero block -->
<header class="container-fluid px-0">
  <div class="hero-full hero-zoom hero-bg">
    <div class="hero-sheen" aria-hidden="true"></div>
    <div class="hero-glitters" aria-hidden="true"></div>

    <div class="hero-card container">
      <div class="hero-left">
        <h1>Handcrafted <span style="color:#ffd27a">Jewellery</span> — Timeless Elegance</h1>
        <p class="lead">Discover artisan-made necklaces, rings and earrings — responsibly sourced metals and artisan finishes, gift-ready packaging, and secure checkout.</p>

        <div class="hero-ctas">
          <a class="btn btn-lg btn-primary btn-hero" href="{% url 'shop:product_list' %}">Shop Now</a>
          <a class="btn btn-lg btn-outline-light btn-hero" href="{% url 'shop:about' %}">Our Story</a>
        </div>
      </div>

     
    </div>
  </div>
</header>

<!-- Main content block (pages will inject here) -->
<div class="container mb-5">
  {% block content %}{% endblock %}
</div>


<!-- Features -->
<section class="container mb-5">
  <div class="row g-3">
    <div class="col-md-4">
      <div class="p-3 feature-card reveal">
        <h5 class="mb-2">Free Shipping</h5>
        <p class="mb-0 small text-muted">On all orders over ₹999 — fast delivery across India.</p>
      </div>
    </div>
    <div class="col-md-4">
      <div class="p-3 feature-card reveal" style="transition-delay:.06s">
        <h5 class="mb-2">Secure Payments</h5>
        <p class="mb-0 small text-muted">Multiple payment options including Razorpay with secure verification.</p>
      </div>
    </div>
    <div class="col-md-4">
      <div class="p-3 feature-card reveal" style="transition-delay:.12s">
        <h5 class="mb-2">Handmade Quality</h5>
        <p class="mb-0 small text-muted">Carefully inspected pieces, crafted to last.</p>
      </div>
    </div>
  </div>
</section>


<!-- Product preview -->
<section class="container mb-5">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4 class="mb-0">Popular picks</h4>
    <a href="{% url 'shop:product_list' %}" class="small">View all</a>
  </div>

  <div class="row g-3">
    {% if products %}
      {% for product in products|slice:":4" %}
        <div class="col-6 col-md-3 reveal">
          <div class="card h-100">
            {% if product.image %}
              <img src="{{ product.image.url }}" class="card-img-top product-thumb" alt="{{ product.title }}">
            {% else %}
              <img src="{% static 'shop/images/g1.jpeg' %}" class="card-img-top product-thumb" alt="product">
            {% endif %}
            <div class="card-body p-2">
              <h6 class="mb-1 small text-truncate">{{ product.title }}</h6>
              <p class="mb-0 small fw-semibold">₹ {{ product.price }}</p>
            </div>
          </div>
        </div>
      {% endfor %}
    {% else %}
      {% for i in "1234" %}
        <div class="col-6 col-md-3 reveal">
          <div class="card h-100">
            <img src="{% static 'shop/images/g1.jpeg' %}" class="card-img-top product-thumb" alt="placeholder">
            <div class="card-body p-2">
              <h6 class="mb-1 small text-truncate">Elegant Piece</h6>
              <p class="mb-0 small fw-semibold">₹ 1,299</p>
            </div>
          </div>
        </div>
      {% endfor %}
    {% endif %}
  </div>
</section>



<!-- Newsletter -->
<section class="container mb-5">
  <div class="newsletter d-flex flex-column flex-md-row justify-content-between align-items-center gap-3 p-3" style="border-radius:10px;background:#fff;">
    <div>
      <h5 class="mb-1">Join our newsletter</h5>
      <p class="mb-0 small text-muted">Get new arrivals and exclusive offers directly to your inbox.</p>
    </div>
    <form class="d-flex w-100 w-md-50" method="post" action="{% url 'shop:subscribe' %}">
      {% csrf_token %}
      <input type="email" name="email" class="form-control me-2" placeholder="Your email" required>
      <button class="btn btn-primary">Subscribe</button>
    </form>
  </div>
</section>
<!-- Footer -->
<footer>
  <div class="container">
    <div class="row gy-4">
      <div class="col-md-4">
        <a class="d-block mb-2 fs-5 fw-bold text-white" href="{% url 'shop:product_list' %}">Jwellery</a>
        <p class="small text-muted">Fine handcrafted jewellery — made with love.</p>
      </div>
      <div class="col-md-4">
        <h6>Quick Links</h6>
        <ul class="list-unstyled small">
          <li><a href="{% url 'shop:product_list' %}">Home</a></li>
          <li><a href="{% url 'shop:about' %}">About</a></li>
          <li><a href="{% url 'shop:contact' %}">Contact</a></li>
        </ul>
      </div>
      <div class="col-md-4">
        <h6>Contact</h6>
        <p class="small mb-1">Email: support@example.com</p>
        <p class="small">Phone: +91 98765 43210</p>
      </div>
    </div>

    <div class="text-center mt-4 small text-muted">
      &copy; {{ year|default:2025 }} Jwellery — All rights reserved.
    </div>
  </div>
</footer>

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
   (function createGlitters(){
    const container = document.querySelector('.hero-glitters');
    if (!container) return;

    const COUNT = 36;           // number of glitter particles
    const width = container.clientWidth;
    const height = container.clientHeight;

    // create particles with random positions and animation timings
    for (let i=0;i<COUNT;i++){
      const g = document.createElement('div');
      g.className = 'glitter';
      // random size variance
      const size = (Math.random() * 6) + 4; // 4..10 px
      g.style.width = `${size}px`;
      g.style.height = `${size}px`;

      // random position across the hero
      g.style.left = `${Math.random() * 100}%`;
      g.style.top = `${Math.random() * 100}%`;

      // random animation params using CSS transitions via setInterval
      const delay = Math.random() * 2200;
      const duration = 1200 + Math.random() * 2400; // ms

      // initial transform + opacity
      g.style.opacity = '0';
      g.style.transform = 'scale(0.65)';

      container.appendChild(g);

      // animate with staggered intervals to simulate glitter twinkles
      (function animateGlow(el, d, dur){
        setTimeout(function tick(){
          // fade in quickly
          el.style.transition = `opacity ${dur/1000}s cubic-bezier(.2,.9,.3,1), transform ${dur/1000}s cubic-bezier(.2,.9,.3,1)`;
          el.style.opacity = (0.6 + Math.random() * 0.4).toFixed(2);
          el.style.transform = `scale(${0.8 + Math.random() * 0.9}) translateY(${-(6 + Math.random()*12)}px)`;
          // fade out after half duration
          setTimeout(function(){
            el.style.opacity = '0';
            el.style.transform = 'scale(0.6)';
            // schedule next tick at a random later time
            setTimeout(tick, 800 + Math.random()*3200);
          }, dur * 0.5);
        }, d);
      })(g, delay, duration);
    }

    // update particle container sizes on resize so positions remain relative
    window.addEventListener('resize', () => {
      // no position recalculation needed because positions are in %.
    });
  })();
</script>
<script>
  // Auto-open login or signup modals when query param is present
  (function(){
    const params = new URLSearchParams(window.location.search);
    if (params.get('show_login') === '1') {
      const m = document.getElementById('loginModal'); if (m) new bootstrap.Modal(m).show();
      params.delete('show_login');
      history.replaceState({}, '', window.location.pathname + (params.toString() ? '?' + params.toString() : ''));
    }
    if (params.get('show_signup') === '1') {
      const m = document.getElementById('signupModal'); if (m) new bootstrap.Modal(m).show();
      params.delete('show_signup');
      history.replaceState({}, '', window.location.pathname + (params.toString() ? '?' + params.toString() : ''));
    }
  })();
</script>
<script>
  // Small script for reveal-on-scroll and hero background parallax-like motion
  document.addEventListener('DOMContentLoaded', function () {
    // Reveal elements
    const reveals = document.querySelectorAll('.reveal');
    const io = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          io.unobserve(entry.target);
        }
      });
    }, { threshold: 0.12 });
    reveals.forEach(el => io.observe(el));

    // Parallax-like hero bg movement on scroll
    const heroBg = document.querySelector('.hero__bg');
    if (heroBg) {
      window.addEventListener('scroll', () => {
        const scrolled = window.scrollY;
        // small transform to create depth (clamped)
        const move = Math.min(40, scrolled * 0.06);
        heroBg.style.transform = `translateY(${move}px) scale(1.06)`;
      }, { passive: true });
    }

    // Slight entrance for hero preview card
    const preview = document.getElementById('heroPreview');
    if (preview) {
      setTimeout(() => preview.classList.add('visible'), 600);
    }
  });
</script>

<script src="{% static 'shop/js/logout.js' %}"></script>
<script src="{% static 'shop/js/main.js' %}"></script>
</body>
</html>
